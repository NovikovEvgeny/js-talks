# multithreading

Все мы не раз слышали "Node.js" однопоточный, или "JS" однопоточный.

Так ли это? 

И да, и нет.

Да - потому что именно наш JS код, который мы пишем, выполняется в одном потоке, т.к. Event Loop однопоточен.

Нет - потому что Node.js - Это целая среда выполнения, а не просто "движок". И в этой среде выполнения

* из коробки идет libuv и threadpool, которые выполняют "долгие" I/O операции в дочерних потоках, пока основной поток
занят выполнением нашего JS кода
* есть способы вручную создавать дополнительные процессы и потоки, чтобы выполнять наши собственные "тяжелые" операции
не блокируя Even Loop

Что такое тяжелые операции? Любой код, который блокирует Event Loop. Самый простой пример:

```js

for (let i = 0; i < 1_000_000_000; i++) {
  JSON.parse('{"foo": "bar"}');
}
```

`for` - блокирующий цикл, `JSON.parse` - тоже. Следовательно, мы миллиард раз выполняем парсинг JSON-а (да, это бесполезная операция),
а в это время вся наша среда выполнения встала - мы не можем принимать входящие http запросы, ответы от Базы данных, коллбеки для
таймаутов/интервалов тоже "стоят", и вообще все коллбеки застряли в очереди и ждут, пока Event Loop освободится.
